Дескрипторы хранятся либо в глобальной таблице дескрипторов (GDT), либо в локальных таблицах дескрипторов (LDT). В GDT содержатся дескрипторы сегментов, которые доступны всем активным задачам на данный момент (например, дескрипторы кодов и данных ОС, дескрипторы сегментов состояния задач; дескрипторы сегментов, содержащих LDT). В GDT не содержатся дескрипторы ловушек и прерываний. ==У микропроцессорной системы одна GDT.== LDT используют для хранения дескрипторов, доступных только данной задаче, их количество определяется количеством активных задач в системе.
![[1744616907624.jpg | 400]]
Для нахождения дескриптора в таблице дескрипторов используется селектор, который содержится в одном из сегментных регистров.

<center>Формат селектора</center>

| 15    ...    3 | 2   | 1      0 |
| -------------- | --- | -------- |
| Index          | TI  | RPL      |

Селектор представляет собой 16-разрядное слово, которое разбито на три части:
1) **бит TI: индикатор таблицы**
	1) TI = 0 – дескриптор находится в GDT;
	2) TI = 0 – дескриптор находится в LDT;
2) **поле Index: номер дескриптора в таблице**;
3) **двухбитовое поле RPL: уровень привилегий запроса, при обращении RPL сравнивается с полем DPL в байте доступа.** Обращение к дескриптору разрешается, если уровень привилегии запроса не ниже ,чем уровень привилегий дескриптора.
Максимальное количество дескрипторов, находящихся в таблице, определяется длиной поля индекса селектора, и равно $2^{13}$. Так как каждый дескриптор имеет длину в 8 байт, то максимальный объём любой таблицы дескрипторов равен $2^{16}$.

![[1744617603897.jpg | 400]]

Для определения положения дескриптора относительно начала таблицы его номер _(в селекторе)_ умножается на 8, т.е. сдвигается на три разряда влево. Если селектор обращается к дескриптору из таблицы GDT _(определяем по TI)_, то полученное смещение сравнивается с хранящейся в GDTR границей таблицы _(поле Предел)_. Если нарушения границы нет, то смещение прибавляется к хранящемуся в GDTR базовому адресу, в результате чего образуется физический адрес выбираемого дескриптора.
Нулевой дескриптор в GDT является пустым и не используется. Селектор с нулевым значением разрядов со 2-ого по 15-й называется ***нуль-индикатором***. Он обеспечивает обращение к нулевому дескриптору, а так как тот не используется, то происходит прерывание. Перед инициированием задачи можно загрузить в регистры DS и ES пустые селекторы. Если потом не инициализировать эти регистры, то адресация памяти через них вызовет прерывание. _**Загрузка в LDTR пустого селектора допустима**_. Такая операция сообщает процессору, что в данной задаче не будет использоваться LDT.
![[1744617708179.jpg]]